"use client"

import { useState, useEffect } from "react"
import { api } from "@/lib/api"

interface Article {
  id: string
  title: string
  lead: string
  content: string
  date: string
  readTime: number
  image: string
}

interface NewsResponse {
  articles: Article[]
  hasMore: boolean
}

export function useNews(page: number) {
  const [data, setData] = useState<NewsResponse | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    const fetchNews = async () => {
      setIsLoading(true)
      /*if (page === 1) {
        setData({
          articles: [
            {
              id: "1",
              title: "Глобальные рынки растут на фоне сигналов о снижении ставок центробанками",
              lead: "Основные индексы в Азии, Европе и США выросли сегодня, поскольку центральные банки намекнули на возможное снижение процентных ставок в ближайшие месяцы.",
              content:
                  "Финансовые рынки по всему миру испытали значительный рост сегодня, поскольку несколько центральных банков сигнализировали о потенциальном изменении денежно-кредитной политики. Федеральная резервная система, Европейский центральный банк и Банк Японии указали, что снижение процентных ставок может быть на горизонте, поскольку инфляционное давление ослабевает.\n\nИнвесторы положительно отреагировали на новости: индекс S&P 500 вырос на 2,3%, а индекс Nasdaq Composite подскочил на 3,1%. Европейские рынки последовали этому примеру: индекс Stoxx Europe 600 прибавил 1,8%.",
              date: "23 мая 2025",
              readTime: 5,
              image: "/placeholder.svg?height=400&width=800",
            },
            {
              id: "2",
              title: "Нефтяные цены снижаются на фоне роста запасов в США",
              lead: "Цены на нефть упали более чем на 2% после публикации данных о неожиданном увеличении запасов сырой нефти в США.",
              content:
                  "Цены на нефть упали более чем на 2% в среду после того, как данные показали неожиданное увеличение запасов сырой нефти в США, что усилило опасения по поводу слабого спроса в крупнейшей в мире экономике.\n\nПо данным Управления энергетической информации (EIA), запасы сырой нефти в США выросли на 3,6 миллиона баррелей за неделю, закончившуюся 19 мая, в то время как аналитики ожидали снижения на 1,8 миллиона баррелей.",
              date: "22 мая 2025",
              readTime: 4,
              image: "/placeholder.svg?height=400&width=800",
            },
            {
              id: "3",
              title: "Китай объявляет о новом пакете стимулов для поддержки экономики",
              lead: "Правительство Китая анонсировало масштабный пакет экономических стимулов на сумму 1,5 триллиона юаней для поддержки замедляющейся экономики.",
              content:
                  "Правительство Китая объявило о новом пакете экономических стимулов на сумму 1,5 триллиона юаней (около 210 миллиардов долларов США) в попытке оживить замедляющуюся экономику страны.\n\nПакет включает в себя налоговые льготы для предприятий, увеличение государственных расходов на инфраструктуру и меры по стимулированию потребления. Это крупнейший пакет стимулов, объявленный Китаем с начала пандемии COVID-19.",
              date: "21 мая 2025",
              readTime: 6,
              image: "/placeholder.svg?height=400&width=800",
            },
            {
              id: "4",
              title: "ЕЦБ предупреждает о рисках для финансовой стабильности",
              lead: "Европейский центральный банк выразил обеспокоенность по поводу растущих рисков для финансовой стабильности в еврозоне.",
              content:
                  "Европейский центральный банк (ЕЦБ) в своем последнем отчете о финансовой стабильности предупредил о растущих рисках для финансовой системы еврозоны.\n\nСреди основных проблем банк отметил высокий уровень корпоративного долга, уязвимость рынка недвижимости и потенциальные риски, связанные с небанковскими финансовыми учреждениями. ЕЦБ также выразил обеспокоенность по поводу геополитической напряженности и ее влияния на экономику региона.",
              date: "20 мая 2025",
              readTime: 7,
              image: "/placeholder.svg?height=400&width=800",
            },
          ],
          hasMore: true,
        })
      } else if (page === 2) {
        setData({
          articles: [
            {
              id: "5",
              title: "Технологические гиганты объявляют о совместной инициативе по ИИ",
              lead: "Крупнейшие технологические компании мира объединяются для разработки стандартов безопасности искусственного интеллекта.",
              content:
                  'Ведущие технологические компании мира, включая Google, Microsoft, Amazon и Meta, объявили о создании совместной инициативы по разработке стандартов безопасности для искусственного интеллекта.\n\nИнициатива, получившая название "AI Safety Alliance", направлена на установление общих принципов и практик для обеспечения безопасного и ответственного развития и внедрения технологий искусственного интеллекта.',
              date: "19 мая 2025",
              readTime: 5,
              image: "/placeholder.svg?height=400&width=800",
            },
            {
              id: "6",
              title: "Инфляция в еврозоне снижается быстрее прогнозов",
              lead: "Последние данные показывают, что инфляция в еврозоне снизилась до 2,4%, что ниже ожиданий аналитиков.",
              content:
                  "Согласно последним данным Евростата, годовая инфляция в еврозоне снизилась до 2,4% в апреле, что ниже прогнозов аналитиков, ожидавших показатель на уровне 2,6%.\n\nСнижение инфляции в основном обусловлено падением цен на энергоносители и замедлением роста цен на продукты питания. Базовая инфляция, которая исключает волатильные цены на энергоносители и продукты питания, также снизилась до 2,7% с 2,9% в предыдущем месяце.",
              date: "18 мая 2025",
              readTime: 4,
              image: "/placeholder.svg?height=400&width=800",
            },
          ],
          hasMore: false,
        })
      }
      setIsLoading(false)*/
      try {
        const response = await api.get("/posts", { params: { page } })
        setData(response.data)
        setError(null)
      } catch (err) {
        setError(err as Error)
      } finally {
        setIsLoading(false)
      }
    }

    fetchNews()
  }, [page])

  return { data, isLoading, error }
}
